<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- <mapper namespace="com.itwill.billycar.mapper.MypageMapper"> -->
<!-- 	<select id="selectMember" resultType="com.itwill.billycar.vo.MemberVO"> -->
<!-- 		Select *  -->
<!-- 		FROM member -->
<!-- 		WHERE member_idx = #{member_idx} -->
<!-- 	</select> -->
<!-- </mapper> -->

<mapper namespace="com.itwill.billycar.mapper.MypageMapper">
    
    
    <select id="selectMemberInfo" parameterType="String" resultType="com.itwill.billycar.vo.MemberVO">
        SELECT *
        FROM member
        WHERE member_id = #{memberId}
    </select>
    
    <select id="selcetMemberQna" resultType="com.itwill.billycar.vo.QnaVO">
		SELECT * 
		FROM qna
		WHERE qna_writer = #{memberId}
	</select>
    
<!--     <select id="selectLicenseStandard" resultType="com.itwill.billycar.vo.License_StandardVO"> -->
<!--     	SELECT * -->
<!--     	FROM license_standard -->
<!--     </select> -->
    
    
    <insert id="insertLicense">
    	INSERT INTO license
    	VALUES (
    		   #{license_id}
    		 , #{license_user_id}
    		 , #{license_name}
    		 , #{license_issue_date}
    		 , #{license_expiration_date}
    		 )
    </insert>

    
<!--    <select id="checkLicenseMatch" parameterType="com.itwill.billycar.vo.LicenseVO" resultType="int"> -->
<!--         SELECT COUNT(*)  -->
<!--         FROM license_standard ls -->
<!--         INNER JOIN license l ON ls.license_sd_id = l.license_id  -->
<!--         WHERE ls.license_sd_id = #{license_id} -->
<!--         AND ls.license_sd_issue_date = #{license_issue_date} -->
<!--         AND ls.license_sd_expiration_date = #{license_expiration_date} -->
<!--     </select> -->
    
    <update id="withdrawMember">
    	UPDATE member
    	SET 
    		member_status = 3
		WHERE 
			member_id = #{member_id}    		
    </update>
    
    <update id="updateInfo">
		UPDATE member
		SET
			member_email = #{member_email}
		  , member_phone = #{member_phone}
		WHERE
			member_id = #{member_id}
	</update>
	
	<select id="compareLicense" resultType="int">
		SELECT count(*) 
		FROM license_standard
		WHERE license_sd_id = #{license_user_id}
		AND license_sd_issue_date = #{license_issue_date}
		AND license_sd_expiration_date = #{license_expiration_date}
	</select>
	
</mapper>
